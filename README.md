# KooCore Dashboard

A lightweight **HTML dashboard** for **KooCore-D**, a momentum scanning and learning system.

This repo is **read-only analytics**:
- It does not place trades
- It does not run scans  
- It visualizes results and learning data generated by the core engine

## Features

- ğŸ¯ **Global Date Filter**: Unified date range control that affects ALL dashboard sections
- ğŸ“Š **Overview**: Summary stats, pick volume by source (filtered by global dates)
- ğŸ“… **Daily Picks**: Timeline view of all scanner outputs (filtered by global dates)
- ğŸ” **Ticker Insights**: Search and analyze individual stocks (filtered by global dates)
- ğŸ“ˆ **Performance Tracker**: Track REAL stock returns using Yahoo Finance prices
- ğŸŒ“ **Dark Mode**: Beautiful light/dark theme support
- ğŸ“¡ **Live Data**: Automatic fetching from GitHub Actions artifacts

## What It Shows

- **Daily Picks**: Weekly Top5, Pro30 candidates, Movers
- **Ticker History**: How often each stock was picked (within date filter)
- **Source Attribution**: Which signals generated which picks
- **Performance Tracking**: REAL returns using actual market prices from Yahoo Finance
- **Date-Filtered Analysis**: Focus on any time period for targeted verification

## Architecture

```
KooCore-D (private, engine)
  â””â”€ GitHub Actions (daily scan)
        â””â”€ uploads artifact: koocore-outputs
             â†“
KooCore-D-Dashboard (public)
  â”œâ”€ HTML Dashboard (dashboard.html)
  â”œâ”€ Flask Server (server.py)
  â”‚   â”œâ”€ /api/picks â†’ fetches from GitHub API
  â”‚   â”œâ”€ /api/status â†’ connection status
  â”‚   â””â”€ /api/prices â†’ fetches real stock prices from Yahoo Finance
  â””â”€ Live Mode:
      â””â”€ Pulls latest artifact via GitHub API
      â””â”€ Fetches real prices via yfinance
        â†“
   Heroku deployment
```

## Data Sources

### Live Mode (Default)
- **Pick Data**: Pulls latest scan results from GitHub Actions artifacts in real-time
- **Price Data**: Fetches actual historical stock prices from Yahoo Finance via yfinance
- **No Demo**: Dashboard always uses live data (fallback to demo only if API unavailable)

## Setup

### 1. Heroku Deployment

The dashboard is deployed on Heroku and serves the HTML interface.

#### Required Config Vars (for Live Mode)

```bash
heroku config:set GITHUB_TOKEN=ghp_your_token_here
heroku config:set CORE_OWNER=raysyhuang
heroku config:set CORE_REPO=KooCore-D
heroku config:set CORE_ARTIFACT_NAME=koocore-outputs
```

**Note:** Without `GITHUB_TOKEN`, the dashboard works in demo mode only.

### 2. GitHub Token Requirements

Create a **Personal Access Token** at https://github.com/settings/tokens

**For Classic Tokens:**
- Scope: `repo` (for private repos) or `public_repo` (for public repos)

**For Fine-Grained Tokens:**
- Repository access: `KooCore-D` only
- Permissions:
  - Actions: Read-only
  - Contents: Read-only

### 3. Local Development

```bash
# Copy example env file
cp .env.example .env

# Edit .env and add your GITHUB_TOKEN

# Install dependencies
pip install -r requirements.txt

# Run locally
python server.py
# or with gunicorn
gunicorn server:app

# Visit: http://localhost:8080
```

### 4. Using the Dashboard

The dashboard automatically fetches live data from GitHub on page load. Key features:

1. **Global Date Filter** (top of page): Set start and end dates to filter ALL dashboard sections
2. **Performance Tracker**: Click "Track Performance (Real Prices)" to fetch real stock prices and calculate actual returns
3. **Caching**: API responses are cached for 5 minutes to avoid rate limits

**Pro Tips**:
- Use global filter to focus on specific weeks or months
- Track performance with 30-day duration to see realistic returns
- Compare different time periods to measure model evolution

## File Structure

```
KooCore-D-Dashboard/
â”œâ”€â”€ server.py                 # Flask server with GitHub API integration
â”œâ”€â”€ dashboard.html            # Single-page HTML dashboard
â”œâ”€â”€ requirements.txt          # Python dependencies (Flask, Gunicorn, Requests)
â”œâ”€â”€ Procfile                  # Heroku process definition
â”œâ”€â”€ .env.example              # Environment variable template
â”œâ”€â”€ data/                     # Data directory (preserved for snapshots)
â””â”€â”€ .github/workflows/
    â””â”€â”€ snapshot-from-core.yml  # Auto-snapshot workflow (optional)
```

## API Endpoints

The Flask server provides these endpoints:

- `GET /` - Serves the HTML dashboard
- `GET /api/picks` - Returns latest picks data from GitHub (cached 5min)
- `GET /api/status` - Returns connection status and configuration
- `POST /api/prices` - Fetches real stock prices from Yahoo Finance
  - Body: `{"tickers": ["AAPL", "TSLA"], "start_date": "2026-01-01", "end_date": "2026-01-31"}`
  - Returns: Historical prices for each ticker

## Technology Stack

- **Frontend**: Vanilla HTML/CSS/JavaScript, Chart.js for visualizations
- **Backend**: Flask (Python) for GitHub API proxy and price fetching
- **Price Data**: yfinance (Yahoo Finance) for real stock prices
- **Data Processing**: pandas for price calculations
- **Deployment**: Heroku with Gunicorn
- **Data Sources**: 
  - GitHub Actions Artifacts (via REST API)
  - Yahoo Finance (via yfinance)

## Safety Rules

- âŒ No writes to KooCore-D
- âŒ No model logic
- âŒ No scan execution
- âœ… Read-only artifact consumption
- âœ… Pure visualization

## License

MIT
