# KooCore Dashboard

A lightweight visualization dashboard for **KooCore-D**, a momentum scanning and learning system.

This repo is **read-only analytics**:
- It does not place trades
- It does not run scans  
- It visualizes results and learning data generated by the core engine

## What It Shows

- **Performance**: Hit rate and return trends over time
- **Attribution**: Which signals work (Weekly vs Pro30 vs Overlap)
- **Rank Decay**: How predictive are ranks (r1 vs r10 vs r20)
- **Regime Analysis**: Performance in bull / chop / bear markets

## Architecture (Option A + History)

```
KooCore-D (private, engine)
  └─ GitHub Actions (daily scan)
        └─ uploads artifact: koocore-outputs
             ↓
KooCore-D-Dashboard (public)
  ├─ Live Mode: pulls latest artifact via API
  └─ History Mode: loads snapshots from data/
        ↓
   Heroku auto-deploy
```

## Data Sources

### 1. Live Mode (GitHub Artifact)
Pulls the latest scan results directly from the core repo's GitHub Actions artifacts.

### 2. Historical Snapshots
Loads dated snapshots stored in this repo:
- `data/phase5/phase5_merged_YYYY-MM-DD.parquet`
- `data/scorecards/phase5_scorecard_*.json`

Snapshots are committed automatically by the `snapshot-from-core` workflow.

## Setup

### Heroku Config Vars

```bash
heroku config:set GITHUB_TOKEN=ghp_your_token_here
heroku config:set CORE_OWNER=raysyhuang
heroku config:set CORE_REPO=KooCore-D
heroku config:set CORE_ARTIFACT_NAME=koocore-outputs
```

### GitHub Token Requirements

Create a **fine-grained token** at https://github.com/settings/tokens?type=beta

- Repository access: `KooCore-D` only
- Permissions:
  - Actions: Read
  - Contents: Read (recommended)

### Dashboard Repo Secret

For the snapshot workflow, add `CORE_REPO_TOKEN` to this repo's secrets:
- Settings → Secrets → Actions → New repository secret
- Name: `CORE_REPO_TOKEN`
- Value: Same token as above

## Local Development

```bash
# Set environment
export GITHUB_TOKEN="your_token"
export CORE_OWNER="raysyhuang"
export CORE_REPO="KooCore-D"

# Install and run
pip install -r requirements.txt
streamlit run app.py
```

## Workflows

### `snapshot-from-core.yml`
Runs daily at 11:45 PM UTC (after core scans complete):
1. Downloads latest artifact from KooCore-D
2. Extracts Phase-5 parquet and scorecards
3. Commits as dated snapshots to `data/`
4. Heroku auto-redeploys with new data

## File Structure

```
KooCore-D-Dashboard/
├── app.py                    # Streamlit dashboard
├── requirements.txt          # Python dependencies
├── Procfile                  # Heroku process
├── data/
│   ├── phase5/               # Historical parquet snapshots
│   │   └── phase5_merged_YYYY-MM-DD.parquet
│   └── scorecards/           # Scorecard JSONs
│       └── phase5_scorecard_*.json
└── .github/workflows/
    └── snapshot-from-core.yml
```

## Safety Rules

- ❌ No writes to KooCore-D
- ❌ No model logic
- ❌ No scan execution
- ✅ Read-only artifact consumption
- ✅ Pure visualization

## License

MIT
